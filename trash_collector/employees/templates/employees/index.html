{% extends 'employees\employee_base.html' %}

{% block title %}
{% block header %} Employee Home: {{user.username}} {% endblock %}
{% endblock %}


{% block content %}
{% if user.is_authenticated %}

<div class="container-fluid">
      <div class="row">
        <table class="center-table">
          <thead>
            <th> Customer with weekly pickup today</th>
            <tr>
                  <th>Customer name</th><th>Confirm Pickup</th><th>Address</th>
              </tr>
          </thead>
          <tbody>
            {% for customer in customer_weekday_pickup %}
            <tr>
                  <td>{{customer.name}}</td>
                  <td>
                    <a href="{% url 'employees:pickup_confirm' customer.id %}" target="popup" onClick="window.open('{% url 'employees:pickup_confirm' customer.id %}','popup','width=500, height=400, top=500')">
                    Confirm Pickup</a></td>
                  <td> <a href="{% url 'employees:customer_address' customer.id %}">View Address</a></td>
                  {% endfor %}
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="row">
        <table class="center-table">
          <thead>
            <th> Customer with one-time pickup today</th>
            <tr>
                  <th>Customer name</th><th>Confirm Pickup</th><th>Address</th>
              </tr>
          </thead>
          <tbody>
            {% for customer in customer_onetime_pickup %}
            <tr>
                <td>{{customer.name}}</td>
                <td>
                  <a href="{% url 'employees:pickup_confirm' customer.id %}" target="popup" onClick="window.open('{% url 'employees:pickup_confirm' customer.id %}','popup','width=400, height=150, top=500')">
                    Confirm Pickup</a></td>
                <td><a href="{% url 'employees:customer_address' customer.id %}">View Address</a></td>
                {% endfor %}
            </tr>
          </tbody>
      </table>
    </div>
  <div>


  <div id="map" style="width: 500px; height: 400px;"></div>
  
  <script type="text/javascript">

      var locations = [
      ['Bondi Beach', -33.890542, 151.274856],
      ['Coogee Beach', -33.923036, 151.259052],
      ['Cronulla Beach', -34.028249, 151.157507],
      ['Manly Beach', -33.80010128657071, 151.28747820854187],
      ['Maroubra Beach', -33.950198, 151.259302]
        ];

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: new google.maps.LatLng(-33.92, 151.25),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        
        var infowindow = new google.maps.InfoWindow();
    
        var marker, i;
        
        for (i = 0; i < locations.length; i++) {  
          marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1], locations[i][2]),
            map: map
          });
          
          google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
              infowindow.setContent(locations[i][0]);
              infowindow.open(map, marker);
            }
          })(marker, i));
        }

  </script>


  {% else %}
    <p>You are at the employee index, but you are not logged in.</p>
    <a href="{% url 'login' %}">Log In</a>
    <a href="{% url 'accounts:register' %}">Sign Up</a>
  {% endif %}

{% endblock %}